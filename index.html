<div id="quiz-wrapper">
    <div id="start-screen" class="quiz-card">
        <h1 style="color: #a1887f;">‚ú® English Vocabulary Quiz ‚ú®</h1>
        <p>Vui l√≤ng nh·∫≠p t√™n ƒë·ªÉ b·∫Øt ƒë·∫ßu √¥n t·∫≠p 30 t·ª´ v·ª±ng.</p>
        <input type="text" id="student-name" placeholder="T√™n c·ªßa b·∫°n..." />
        <br>
        <button onclick="startQuiz()">B·∫Øt ƒë·∫ßu</button>
    </div>

    <div id="quiz-container" class="quiz-card hide">
        <div class="quiz-header">
            <div id="display-name" style="font-weight: bold;"></div>
            <div class="progress-bar-bg"><div id="progress-bar-fill"></div></div>
            <div id="timer-display">‚è±Ô∏è <span id="time-left">20</span>s</div>
        </div>
        <div id="question-box">
            <h2 id="question-text" style="font-size: 1.1rem; min-height: 50px; color: #5d4037;"></h2>
            <div id="options-container"></div>
        </div>
    </div>

    <div id="result-screen" class="quiz-card hide">
        <h2 style="color: #a1887f;">K·∫øt qu·∫£ b√†i thi</h2>
        <div id="ranking-box" style="font-size: 3rem;"></div>
        <div id="final-stats"></div>
        <div id="review-container" style="text-align: left; max-height: 400px; overflow-y: auto; margin-top: 20px; border-top: 1px solid #eee;"></div>
        <button onclick="location.reload()" style="margin-top: 20px;">L√†m l·∫°i</button>
    </div>
</div>

<style>
#quiz-wrapper { font-family: 'Arial', sans-serif; background: linear-gradient(135deg, #fdfcfb 0%, #e2d1c3 100%); padding: 20px; border-radius: 15px; display: flex; justify-content: center; }
.quiz-card { background: rgba(255, 255, 255, 0.95); padding: 30px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); width: 100%; max-width: 500px; text-align: center; }
.hide { display: none !important; }
#student-name { width: 80%; padding: 10px; margin: 15px 0; border: 2px solid #ffdac1; border-radius: 8px; }
button { background: linear-gradient(to right, #ffb7b2, #ffdac1); border: none; padding: 10px 25px; border-radius: 20px; font-weight: bold; cursor: pointer; color: #5d4037; }
.option-btn { display: block; width: 100%; background: #fff; margin: 8px 0; padding: 12px; border: 1px solid #eee; border-radius: 10px; text-align: left; cursor: pointer; transition: 0.2s; }
.option-btn:hover { background: #fff5f5; border-color: #ffb7b2; }
.progress-bar-bg { background: #eee; height: 8px; border-radius: 4px; margin: 10px 0; }
#progress-bar-fill { background: #b2e2f2; height: 100%; width: 0%; transition: 0.3s; }
.status-correct { color: #27ae60; font-weight: bold; }
.status-wrong { color: #e74c3c; font-weight: bold; }
</style>

<script>
const quizData = [
    { q: "She has the ________ to sing beautifully.", a: ["ability", "ban", "pilot", "right"], c: 0 },
    { q: "Because of his injury, he was ________ to walk.", a: ["able", "unable", "gentle", "physical"], c: 1 },
    { q: "The government decided to ________ smoking in public.", a: ["earn", "face", "ban", "promote"], c: 2 },
    { q: "In the past, many girls were ________ to get married early.", a: ["forced", "gentle", "official", "equal"], c: 0 },
    { q: "________, have you seen my keys?", a: ["By the way", "Official", "Individual", "Deal with"], c: 0 },
    { q: "Yuri Gagarin was a famous ________.", a: ["firefighter", "cosmonaut", "surgeon", "secretary"], c: 1 },
    { q: "We need to ________ this problem immediately.", a: ["deal with", "earn", "focus", "ban"], c: 0 },
    { q: "________ is a serious crime in many countries.", a: ["Fitness", "Domestic violence", "Teamwork", "Knowledge"], c: 1 },
    { q: "She works hard to ________ a high salary.", a: ["face", "earn", "promote", "treat"], c: 1 },
    { q: "Men and women should receive ________ pay.", a: ["equal", "low-paying", "mental", "physical"], c: 0 },
    { q: "________ means having the same rights.", a: ["Equality", "Violence", "Pressure", "Ability"], c: 0 },
    { q: "Looking at screens too much can hurt your ________.", a: ["fitness", "eyesight", "strength", "knowledge"], c: 1 },
    { q: "You must ________ the truth sooner or later.", a: ["face", "earn", "ban", "treat"], c: 0 },
    { q: "The ________ saved the cat from the fire.", a: ["pilot", "firefighter", "officer", "secretary"], c: 1 },
    { q: "Daily exercise is good for your ________.", a: ["fitness", "knowledge", "violence", "reason"], c: 0 },
    { q: "Please ________ on your work.", a: ["face", "focus", "earn", "treat"], c: 1 },
    { q: "We are fighting for ________ in the workplace.", a: ["gender equality", "domestic violence", "pressure", "safety"], c: 0 },
    { q: "He is a very ________ and kind man.", a: ["gentle", "forced", "unable", "physical"], c: 0 },
    { q: "They plan to ________ next summer.", a: ["get married", "deal with", "make a decision", "take care of"], c: 0 },
    { q: "Being a doctor is a ________ career.", a: ["low-paying", "high-paying", "uneducated", "unable"], c: 1 },
    { q: "Each ________ has their own talent.", a: ["individual", "equality", "knowledge", "safety"], c: 0 },
    { q: "My son is 4 years old, so he goes to ________.", a: ["medical school", "kindergarten", "university", "summer camp"], c: 1 },
    { q: "Reading helps increase your ________.", a: ["strength", "knowledge", "fitness", "violence"], c: 1 },
    { q: "Working as a waiter is often a ________ job.", a: ["high-paying", "low-paying", "professional", "skillful"], c: 1 },
    { q: "It's time to ________ about your future.", a: ["make a decision", "get married", "deal with", "take care of"], c: 0 },
    { q: "He studied for 6 years in ________.", a: ["kindergarten", "medical school", "summer camp", "office"], c: 1 },
    { q: "Exercise is good for both ________ and physical health.", a: ["mental", "gentle", "equal", "forced"], c: 0 },
    { q: "The police ________ asked for his ID.", a: ["officer", "secretary", "pilot", "patient"], c: 0 },
    { q: "The doctor said the ________ was successful.", a: ["operation", "opportunity", "equality", "strength"], c: 0 },
    { q: "Studying abroad is a great ________.", a: ["pressure", "opportunity", "violence", "victim"], c: 1 }
];

let currentIdx = 0, score = 0, userName = "", userAnswers = [], timeLeft = 20, timer;

function startQuiz() {
    userName = document.getElementById('student-name').value;
    if (!userName) return alert("Nh·∫≠p t√™n b·∫°n nh√©!");
    document.getElementById('start-screen').classList.add('hide');
    document.getElementById('quiz-container').classList.remove('hide');
    document.getElementById('display-name').innerText = "H·ªçc sinh: " + userName;
    loadQuestion();
}

function loadQuestion() {
    clearInterval(timer);
    timeLeft = 20;
    document.getElementById('time-left').innerText = timeLeft;
    const data = quizData[currentIdx];
    document.getElementById('question-text').innerText = `C√¢u ${currentIdx + 1}: ${data.q}`;
    const optionsDiv = document.getElementById('options-container');
    optionsDiv.innerHTML = "";
    data.a.forEach((opt, i) => {
        const btn = document.createElement('button');
        btn.className = "option-btn";
        btn.innerText = opt;
        btn.onclick = () => checkAnswer(i);
        optionsDiv.appendChild(btn);
    });
    document.getElementById('progress-bar-fill').style.width = `${((currentIdx+1)/quizData.length)*100}%`;
    timer = setInterval(() => {
        timeLeft--;
        document.getElementById('time-left').innerText = timeLeft;
        if(timeLeft <= 0) { clearInterval(timer); checkAnswer(-1); }
    }, 1000);
}

function checkAnswer(choice) {
    const data = quizData[currentIdx];
    const isCorrect = choice === data.c;
    if(isCorrect) score++;
    userAnswers.push({ q: data.q, user: choice === -1 ? "H·∫øt gi·ªù" : data.a[choice], correct: data.a[data.c], status: isCorrect });
    currentIdx++;
    if(currentIdx < quizData.length) loadQuestion();
    else showResults();
}

function showResults() {
    clearInterval(timer);
    document.getElementById('quiz-container').classList.add('hide');
    document.getElementById('result-screen').classList.remove('hide');
    document.getElementById('ranking-box').innerText = score >= 25 ? "ü•á" : (score >= 15 ? "ü•à" : "ü•â");
    document.getElementById('final-stats').innerText = `${userName}, b·∫°n ƒë√∫ng ${score}/30 c√¢u!`;
    const reviewDiv = document.getElementById('review-container');
    userAnswers.forEach((item, i) => {
        reviewDiv.innerHTML += `<div style="margin-bottom:10px; font-size:13px;"><b>${i+1}.</b> ${item.q}<br><span class="${item.status?'status-correct':'status-wrong'}">${item.status?'‚úì':'‚úó'} B·∫°n ch·ªçn: ${item.user} (ƒê√∫ng: ${item.correct})</span></div>`;
    });
}
</script>
